#!/bin/bash

##################
# Load mpicc and mpicxx into $PATH
##################

#. /usr/share/[mM]odules/init/bash
#module load mvapich2-gnu-psm/1.7

. /usr/local/tools/dotkit/init.sh
use mvapich2-gnu

##################
# Build software
##################

set -x

OPT="-g -O0"

installdir=`pwd`/install

mpicxx ${OPT} -o mpiwalk mpiwalk.cpp \
  -I${installdir}/include -L${installdir}/lib -Wl,-rpath,${installdir}/lib -lcircle -llwgrp -ldtcmp

mpicxx ${OPT} -o drm drm.cpp \
  -I${installdir}/include -L${installdir}/lib -Wl,-rpath,${installdir}/lib -lcircle -llwgrp -ldtcmp

